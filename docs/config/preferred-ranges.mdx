---
sidebar_position: 7
---

# preferred_ranges

`preferred_ranges` sets the priority order for underlay ip addresses. Two hosts on the same LAN would likely benefit from having their tunnels use the LAN IP addresses rather than the public IP addresses the lighthouse may have learned for them.

Default `preferred_ranges` order: `ipv6` > `public ipv4` > `private ipv4`

There are no magic words for these values:

- `::/0` is all `ipv6`
- `0.0.0.0/0` is all `ipv4`
- `10.0.0.0/8` + `172.16.0.0/12` + `192.168.0.0/16` is all `private ipv4` based on [`RFC1918` private ranges](https://datatracker.ietf.org/doc/html/rfc1918)
- `192.168.0.0/16` would be a specific private `ipv4` network

:::note

The previous option [`local_range`](/config/local-range) only allowed definition of a single range
and has been deprecated for `preferred_ranges`

:::

To set up a host that prefers local network `172.16.0.0/24` first, then `ipv6` then `public ipv4` then `private ipv4`, specify:

```yml
preferred_ranges: ['172.16.0.0/24']
```

This would add the network range `172.16.0.0/24` to the `preferred_ranges` list, which nebula will use to influence its ranking of options for underlay connections. If you pass two or more network ranges, nebula will sort those in accordance with the above default rankings within the `preferred_ranges` list.
